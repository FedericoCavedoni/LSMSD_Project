1. Creare cartelle 

mkdir  c:\MongoDB\data\r1  
mkdir  c:\MongoDB\data\r2  
mkdir  c:\MongoDB\data\r3  

2. Far partire repliche 

#FIRST MEMBER (PRIMARY)
mongod --replSet rs0 --port 27018 --bind_ip localhost --dbpath c:\MongoDB\data\r1  --oplogSize 200		
		
#SECOND MEMBER (SECONDARY)
mongod --replSet rs0 --port 27019 --bind_ip localhost --dbpath c:\MongoDB\data\r2  --oplogSize 200		

#THIRD MEMBER (SECONDARY)
mongod --replSet rs0 --port 27020 --bind_ip localhost --dbpath c:\MongoDB\data\r3  --oplogSize 200

3. Fare dump sulle repliche 

mongodump --host localhost --port 27017 --out C:\MongoDB\backup

mongorestore --host localhost --port 27018 --db Progetto C:\MongoDB\backup\Progetto #SCEGLIERE LA PORTA DELLA REPLICA PRIMARIA

4. Collegarsi alla prima replica

mongosh --port 27017 #SCEGLIERE LA PORTA DELLA REPLICA PRIMARIA

5. Cambiare stato delle repliche e controllare stato

rsconf = {
    _id: "rs0",
    members: [
      {
        _id: 0,
        host: "localhost:27018",
        priority: 5
      },
      {
        _id: 1,
        host: "localhost:27019",
        priority: 3
      },
      {
        _id: 2,
        host: "localhost:27020",
        priority: 1
      }
    ]
  }
  


rs.initiate(rsconf)

rs.reconfig(rsconf)

rs.conf()


7. Controllare stato

rs.status()
